 <!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BEST MARKETING COMPANY ‚Äî Corporate</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Poppins:wght@500;600;700;800&display=swap" rel="stylesheet">
<!-- GSAP -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bcryptjs/2.4.3/bcrypt.min.js"></script>

<style>
:root{
  --primary: #0f172a; /* Deep Navy */
  --accent: #2563eb; /* Vibrant Blue */
  --accent-light: #60a5fa;
  --bg: #f8fafc;
  --surface: #ffffff;
  --text: #334155;
  --text-dark: #0f172a;
  --border: #e2e8f0;
  --radius: 16px;
  --shadow-sm: 0 4px 6px -1px rgba(0,0,0,0.05);
  --shadow-lg: 0 20px 25px -5px rgba(0,0,0,0.05), 0 8px 10px -6px rgba(0,0,0,0.01);
  --container: 1280px;
  --nav-height: 80px;
}

*{box-sizing:border-box;margin:0;padding:0;outline:none}
html{scroll-behavior:smooth}
body{
  background: var(--bg);
  color: var(--text);
  font-family: 'Inter', sans-serif;
  line-height: 1.6;
  overflow-x: hidden;
}

h1,h2,h3,h4,h5,h6,.hero-h,.title,.brand-font {
  font-family: 'Poppins', sans-serif;
  color: var(--text-dark);
}

a{text-decoration:none;color:inherit;transition:0.3s}
img,video{max-width:100%;display:block}

/* Preloader */
#preloader {
  position: fixed; inset: 0; background: #fff; z-index: 99999;
  display: flex; align-items: center; justify-content: center;
  flex-direction: column;
}
.loader-logo { font-size: 32px; font-weight: 800; letter-spacing: -1px; margin-bottom: 20px; font-family: 'Poppins', sans-serif; color: var(--primary); }
.loader-bar { width: 200px; height: 3px; background: #eee; border-radius: 99px; overflow: hidden; }
.loader-progress { width: 0%; height: 100%; background: var(--accent); transition: width 0.5s ease; }

/* Scroll Progress */
#scroll-progress{position:fixed;top:0;left:0;height:4px;width:0;background:linear-gradient(90deg,var(--accent),#3b82f6);z-index:99999}

/* Navigation */
.main-nav {
  position: fixed; top: 0; left: 0; width: 100%; z-index: 1000;
  background: rgba(255,255,255,0.95);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid rgba(0,0,0,0.05);
  height: var(--nav-height);
  transition: all 0.3s ease;
}
.main-nav.scrolled { height: 60px; box-shadow: var(--shadow-sm); }
.main-nav-inner {
  max-width: var(--container); margin: 0 auto; height: 100%;
  display: flex; align-items: center; justify-content: space-between; padding: 0 24px;
}
.nav-logo { font-size: 22px; font-weight: 800; letter-spacing: -0.5px; color: var(--primary); }
.nav-links { display: flex; gap: 32px; align-items: center; }
.nav-links a { font-weight: 500; font-size: 15px; color: var(--text); position: relative; }
.nav-links a:hover { color: var(--accent); }
.nav-links a::after {
  content: ''; position: absolute; bottom: -4px; left: 0; width: 0; height: 2px;
  background: var(--accent); transition: width 0.3s;
}
.nav-links a:hover::after { width: 100%; }
.mobile-toggle { display: none; }

.nav-actions { display: flex; gap: 16px; align-items: center; }
.btn-nav { padding: 10px 20px; border-radius: 99px; font-weight: 600; font-size: 14px; background: var(--primary); color: #fff; }
.btn-nav:hover { background: var(--accent); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(37,99,235,0.3); }

/* Hero Section */
.hero {
  padding: 160px 24px 100px;
  min-height: 90vh;
  display: flex; align-items: center; justify-content: center;
  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
  position: relative; overflow: hidden;
}
.hero::before {
  content: ''; position: absolute; width: 600px; height: 600px;
  background: radial-gradient(circle, rgba(96,165,250,0.15) 0%, rgba(255,255,255,0) 70%);
  top: -100px; right: -100px; border-radius: 50%; pointer-events: none;
}
.hero-inner {
  max-width: var(--container); width: 100%;
  display: grid; grid-template-columns: 1.2fr 1fr; gap: 60px; align-items: center;
}
.hero-h {
  font-size: 56px; line-height: 1.1; font-weight: 800; letter-spacing: -1.5px;
  margin-bottom: 24px; background: linear-gradient(to right, var(--primary), var(--accent));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}
.hero-sub { font-size: 18px; color: var(--text); margin-bottom: 32px; max-width: 540px; font-weight: 400; }
.hero-btns { display: flex; gap: 16px; }
.btn {
  padding: 14px 28px; border-radius: 12px; font-weight: 600; cursor: pointer;
  display: inline-flex; align-items: center; gap: 8px; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.btn-primary { background: var(--accent); color: #fff; border: none; box-shadow: 0 4px 12px rgba(37,99,235,0.25); }
.btn-primary:hover { background: var(--primary); transform: translateY(-2px); box-shadow: 0 8px 20px rgba(15,23,42,0.2); }
.btn-ghost { background: transparent; border: 1px solid var(--border); color: var(--text-dark); }
.btn-ghost:hover { border-color: var(--accent); color: var(--accent); background: rgba(37,99,235,0.05); }

.hero-img-wrap { position: relative; z-index: 1; }
.hero-img-wrap img { border-radius: 24px; box-shadow: 0 24px 48px rgba(0,0,0,0.12); transform: perspective(1000px) rotateY(-5deg) rotateX(5deg); transition: transform 0.5s ease; }
.hero-img-wrap:hover img { transform: perspective(1000px) rotateY(0) rotateX(0); }

/* Stats Bar */
.stats-bar {
  max-width: var(--container); margin: -60px auto 60px; padding: 32px;
  background: #fff; border-radius: 20px; box-shadow: var(--shadow-lg);
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px;
  position: relative; z-index: 10;
}
.stat-item { text-align: center; border-right: 1px solid var(--border); }
.stat-item:last-child { border-right: none; }
.stat-num { font-size: 36px; font-weight: 800; color: var(--accent); font-family: 'Poppins', sans-serif; }
.stat-lbl { font-size: 14px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; color: var(--text); }

/* Common Section */
.section { max-width: var(--container); margin: 100px auto; padding: 0 24px; }
.section-header { text-align: center; max-width: 700px; margin: 0 auto 60px; }
.title { font-size: 36px; font-weight: 700; margin-bottom: 16px; letter-spacing: -1px; }
.subtitle { color: var(--text); font-size: 16px; }
.underline { width: 60px; height: 4px; background: var(--accent); margin: 0 auto 20px; border-radius: 2px; }

/* Cards Grid */
.grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 32px; }
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 48px; align-items: center; }

/* Services */
.service-card {
  background: #fff; padding: 32px; border-radius: 20px; border: 1px solid var(--border);
  transition: all 0.3s ease; position: relative; overflow: hidden;
}
.service-card:hover { transform: translateY(-8px); box-shadow: var(--shadow-lg); border-color: transparent; }
.service-icon {
  width: 64px; height: 64px; background: rgba(37,99,235,0.1); border-radius: 16px;
  display: flex; align-items: center; justify-content: center; font-size: 28px; color: var(--accent);
  margin-bottom: 24px; transition: 0.3s;
}
.service-card:hover .service-icon { background: var(--accent); color: #fff; }
.service-title { font-size: 20px; font-weight: 700; margin-bottom: 12px; font-family: 'Poppins'; }
.service-desc { font-size: 15px; color: var(--text); }

/* Highlights / Products */
.highlight-card {
  background: #fff; border-radius: 20px; overflow: hidden; border: 1px solid var(--border);
  cursor: pointer; transition: all 0.3s;
}
.highlight-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-lg); }
.highlight-body { padding: 24px; }
.highlight-title { font-size: 18px; font-weight: 700; margin-bottom: 8px; }

/* Case Studies */
.case-card {
  background: #fff; padding: 32px; border-radius: 20px; border-left: 4px solid var(--accent);
  box-shadow: var(--shadow-sm); margin-bottom: 20px;
}

/* Gallery */
.gallery-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }
.gallery-item {
  border-radius: 16px; overflow: hidden; height: 260px; position: relative;
  box-shadow: var(--shadow-sm); transition: transform 0.3s;
}
.gallery-item:hover { transform: scale(1.02); z-index: 2; box-shadow: var(--shadow-lg); }
.gallery-item img, .gallery-item video { width: 100%; height: 100%; object-fit: cover; }

/* Trusted Carousel */
.trusted-wrap {
  margin: 80px 0; background: #fff; padding: 40px 0; border-top: 1px solid var(--border); border-bottom: 1px solid var(--border);
  overflow: hidden;
}
.trusted-title { text-align: center; font-weight: 700; color: var(--text-dark); margin-bottom: 32px; text-transform: uppercase; letter-spacing: 1.5px; font-size: 14px; }
.marquee { display: flex; gap: 60px; width: max-content; animation: scroll 25s linear infinite; }
.brand-logo { font-size: 24px; font-weight: 800; color: #cbd5e1; font-family: 'Poppins'; }
@keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

/* Contact */
.contact-wrap {
  background: #fff; border-radius: 24px; padding: 48px; box-shadow: var(--shadow-lg);
  max-width: 800px; margin: 0 auto;
}
.form-group { margin-bottom: 20px; }
.form-input, .form-textarea {
  width: 100%; padding: 16px; border-radius: 12px; border: 1px solid var(--border);
  background: #f8fafc; font-size: 15px; transition: 0.3s;
}
.form-input:focus, .form-textarea:focus { border-color: var(--accent); background: #fff; box-shadow: 0 0 0 4px rgba(37,99,235,0.1); }

/* Footer */
footer { background: var(--primary); color: #fff; padding: 80px 24px 40px; margin-top: 120px; }
.footer-inner { max-width: var(--container); margin: 0 auto; display: grid; grid-template-columns: 2fr 1fr 1fr 1.5fr; gap: 40px; }
.footer-col h4 { font-size: 18px; margin-bottom: 24px; color: #fff; }
.footer-col a { display: block; color: #94a3b8; margin-bottom: 12px; font-size: 15px; }
.footer-col a:hover { color: #fff; transform: translateX(4px); }
.newsletter-box { display: flex; gap: 8px; margin-top: 16px; }
.newsletter-box input { flex: 1; padding: 12px; border-radius: 8px; border: none; }

/* Admin / Dashboard */
.admin-fullpage { display: none; min-height: 100vh; background: #f1f5f9; padding: 40px; }
.dashboard-grid { display: grid; grid-template-columns: 250px 1fr; gap: 32px; max-width: 1400px; margin: 0 auto; }
.sidebar-admin { background: #fff; border-radius: 16px; padding: 24px; height: calc(100vh - 80px); position: sticky; top: 40px; }
.admin-content { background: #fff; border-radius: 16px; padding: 32px; min-height: 80vh; }
.data-table { width: 100%; border-collapse: collapse; margin-top: 24px; }
.data-table th { text-align: left; padding: 16px; border-bottom: 2px solid #e2e8f0; color: #64748b; font-size: 13px; text-transform: uppercase; }
.data-table td { padding: 16px; border-bottom: 1px solid #e2e8f0; font-size: 14px; }
.status-badge { padding: 4px 12px; border-radius: 99px; font-size: 12px; font-weight: 600; }
.status-badge.new { background: #dbeafe; color: #1e40af; }

/* Responsive */
@media(max-width: 1024px){
  .hero-inner { grid-template-columns: 1fr; text-align: center; }
  .hero-img-wrap { display: none; }
  .grid-3 { grid-template-columns: 1fr 1fr; }
  .stats-bar { grid-template-columns: 1fr; gap: 16px; }
}
@media(max-width: 768px){
  .grid-3, .grid-2 { grid-template-columns: 1fr; }
  .main-nav-inner { padding: 0 16px; }
  .nav-links { display: none; } 
  .mobile-toggle { display: block; font-size: 24px; cursor: pointer; margin-left: auto; margin-right: 16px; }
  .nav-actions { display: none; } /* hide buttons on mobile, show in menu */
  .hero-h { font-size: 40px; }
}

/* Mobile Menu */
.mobile-menu {
  position: fixed; top: 80px; left: 0; width: 100%; background: #fff;
  border-bottom: 1px solid var(--border); padding: 24px;
  display: none; flex-direction: column; gap: 16px; box-shadow: var(--shadow-lg); z-index: 999;
}
.mobile-menu a { font-size: 18px; font-weight: 600; color: var(--text-dark); }


/* Utils */
.toast { background: var(--primary); color: #fff; padding: 16px 24px; border-radius: 12px; box-shadow: var(--shadow-lg); font-weight: 500; }
</style>
</head>
<body>

<!-- PRELOADER -->
<div id="preloader">
  <div class="loader-logo">BMC</div>
  <div class="loader-bar"><div class="loader-progress" id="loaderProgress"></div></div>
</div>

<!-- PROGRESS -->
<div id="scroll-progress" aria-hidden="true"></div>

<!-- NAV -->
<nav class="main-nav">
  <div class="main-nav-inner">
    <a href="#top" class="nav-logo brand-font">BEST MARKETING CO.</a>
    <div class="nav-links">
      <a href="#who">About</a>
      <a href="#services">Services</a>
      <a href="#products">Products</a>
      <a href="#cases">Case Studies</a>
      <a href="#contact">Contact</a>
    </div>
    <div class="mobile-toggle" id="mobileToggle">‚ò∞</div>
    <div class="nav-actions">
      <a href="#admin" id="adminNav" style="font-size:14px;font-weight:600">Admin</a>
      <a href="#contact" class="btn-nav">Get Quote</a>
    </div>
  </div>
</nav>

<!-- MOBILE MENU -->
<div class="mobile-menu" id="mobileMenu">
  <a href="#who">About</a>
  <a href="#services">Services</a>
  <a href="#products">Products</a>
  <a href="#cases">Case Studies</a>
  <a href="#contact">Contact</a>
  <hr style="border:none;border-top:1px solid #eee">
  <a href="#admin" style="color:var(--accent)">Admin Portal</a>
  <a href="#contact">Get Quote</a>
</div>

<!-- HERO -->
<header class="hero" id="top">
  <div class="hero-inner">
    <div class="hero-content">
      <h1 class="hero-h" id="heroHeading">Engineering Excellence for Modern Industries</h1>
      <p class="hero-sub">We supply premium valves, crucibles, dosing systems, and automation solutions. Trusted by India's leading manufacturing plants.</p>
      <div class="hero-btns">
        <a class="btn btn-primary" href="#contact">Start a Project <span>‚Üí</span></a>
        <a class="btn btn-ghost" href="#products">View Products</a>
      </div>
    </div>
    <div class="hero-img-wrap">
      <img src="hero-banner.jpg" alt="Industrial Engineering" style="height:500px;object-fit:cover">
    </div>
  </div>
</header>

<!-- STATS BAR -->
<div class="stats-bar">
  <div class="stat-item">
    <div class="stat-num" data-target="120">0</div>
    <div class="stat-lbl">Projects Delivered</div>
  </div>
  <div class="stat-item">
    <div class="stat-num" data-target="45">0</div>
    <div class="stat-lbl">Years Experience</div>
  </div>
  <div class="stat-item">
    <div class="stat-num" data-target="350">0</div>
    <div class="stat-lbl">Active Clients</div>
  </div>
</div>

<!-- ABOUT -->
<section id="who" class="section">
  <div class="section-header">
    <div class="title">Who We Are</div>
    <div class="underline"></div>
    <div class="subtitle">BEST MARKETING COMPANY is a premier distributor of industrial components, dedicated to enhancing operational efficiency across India.</div>
  </div>
  <div class="grid-2">
    <div><img src="about.jpg" alt="About BMC" style="border-radius:20px;box-shadow:var(--shadow-lg)"></div>
    <div>
      <h3 style="font-size:28px;margin-bottom:16px">Your Partner in Industrial Excellence</h3>
      <p style="margin-bottom:20px;color:var(--text)">We specialize in high-performance valves, crucibles, dosing pumps, and lubrication systems. Our team ensures that every component we supply meets the highest global standards.</p>
      <ul style="list-style:none;margin-bottom:24px;display:grid;gap:12px">
        <li style="display:flex;align-items:center;gap:10px"><span style="color:var(--accent)">‚úì</span> Pan-India Supply Network</li>
        <li style="display:flex;align-items:center;gap:10px"><span style="color:var(--accent)">‚úì</span> 24/7 Technical Support</li>
        <li style="display:flex;align-items:center;gap:10px"><span style="color:var(--accent)">‚úì</span> Authorized Distributor</li>
      </ul>
      <a href="#contact" class="btn btn-ghost">Learn More</a>
    </div>
  </div>
</section>

<!-- SERVICES -->
<section id="services" class="section">
  <div class="section-header">
    <div class="title">Our Expertise</div>
    <div class="underline"></div>
    <div class="subtitle">Comprehensive solutions tailored for foundry, metal, and chemical industries.</div>
  </div>
  <div class="grid-3 services-grid">
    <div class="service-card">
      <div class="service-icon">‚öôÔ∏è</div>
      <div class="service-title">Industrial Supply</div>
      <p class="service-desc">Premium valves, actuators, and foundry consumables sourced from top manufacturers.</p>
    </div>
    <div class="service-card">
      <div class="service-icon">üíß</div>
      <div class="service-title">Automation & Dosing</div>
      <p class="service-desc">Precision dosing pumps and automated control systems for chemical processing.</p>
    </div>
    <div class="service-card">
      <div class="service-icon">ÔøΩ</div>
      <div class="service-title">Technical Consultancy</div>
      <p class="service-desc">Expert advice on process optimization, installation, and field troubleshooting.</p>
    </div>
  </div>
</section>

<!-- PRODUCTS -->
<section id="products" class="section">
  <div class="section-header">
    <div class="title">Featured Products</div>
    <div class="underline"></div>
  </div>
  <div class="grid-3 highlights">
    <div class="highlight-card highlight" data-title="Industrial Valve A1" data-desc="Robust Industrial Ball Valve ‚Äî engineered for durability.">
      <div style="height:200px;background:#e2e8f0;display:flex;align-items:center;justify-content:center;color:#94a3b8;font-weight:700">Image Placeholder</div>
      <div class="highlight-body">
        <div class="highlight-title">Industrial Valve A1</div>
        <p style="color:var(--muted);font-size:14px">Robust Industrial Ball Valve ‚Äî engineered for durability.</p>
      </div>
    </div>
    <div class="highlight-card highlight" data-title="Crucible C-300" data-desc="High-temp graphite lined">
      <div style="height:200px;background:#e2e8f0;display:flex;align-items:center;justify-content:center;color:#94a3b8;font-weight:700">Image Placeholder</div>
      <div class="highlight-body">
        <div class="highlight-title">Crucible C-300</div>
        <p style="color:var(--muted);font-size:14px">High-temp graphite lined for extreme conditions.</p>
      </div>
    </div>
    <div class="highlight-card highlight" data-title="Coolant LX" data-desc="Long-life metalworking coolant">
      <div style="height:200px;background:#e2e8f0;display:flex;align-items:center;justify-content:center;color:#94a3b8;font-weight:700">Image Placeholder</div>
      <div class="highlight-body">
        <div class="highlight-title">Coolant LX</div>
        <p style="color:var(--muted);font-size:14px">Long-life metalworking coolant for precision machining.</p>
      </div>
    </div>
  </div>
</section>

<!-- CASE STUDIES -->
<section id="cases" class="section">
  <div class="section-header">
    <div class="title">Success Stories</div>
    <div class="underline"></div>
  </div>
  <div class="grid-3">
    <div class="case-card case">
      <h4 style="margin-bottom:10px;font-size:18px">Foundry Efficiency Upgrade</h4>
      <p style="color:var(--text);font-size:14px">Reduced downtime by 23% through tuned dosing & control systems for a major auto parts manufacturer.</p>
    </div>
    <div class="case-card case">
      <h4 style="margin-bottom:10px;font-size:18px">Valve Retrofit Project</h4>
      <p style="color:var(--text);font-size:14px">Replaced legacy valves to improve safety and reduce leakage by 95% in a chemical plant.</p>
    </div>
    <div class="case-card case">
      <h4 style="margin-bottom:10px;font-size:18px">Lubrication Program</h4>
      <p style="color:var(--text);font-size:14px">Custom lubrication program extended asset life by 2 years for heavy machinery client.</p>
    </div>
  </div>
</section>

<!-- GALLERY -->
<section id="gallery" class="section">
  <div class="section-header">
    <div class="title">Media Gallery</div>
    <div class="underline"></div>
  </div>
  <div class="gallery-grid">
    <div class="gallery-item"><img src="office-1.jpg" alt="Office photo"></div>
    <div class="gallery-item"><img src="product-1.jpg" alt="Product image"></div>
    <div class="gallery-item"><img src="office-2.jpg" alt="Office photo"></div>
    <div class="gallery-item"><video src="company-video-1.mp4" controls></video></div>
    <div class="gallery-item"><img src="product-2.jpg" alt="Product image"></div>
    <div class="gallery-item"><video src="company-video-2.mp4" controls></video></div>
  </div>
</section>

<!-- TRUSTED BY -->
<div class="trusted-wrap">
  <div class="trusted-title">Trusted By Industry Leaders</div>
  <div class="marquee">
    <div class="brand-logo">AVCON</div>
    <div class="brand-logo">Morgan</div>
    <div class="brand-logo">Red Diamond</div>
    <div class="brand-logo">Chem Trend</div>
    <div class="brand-logo">Dosatron</div>
    <div class="brand-logo">Larsen & Toubro</div>
    <div class="brand-logo">Tata Steel</div>
    <!-- Duplicate for loop -->
    <div class="brand-logo">AVCON</div>
    <div class="brand-logo">Morgan</div>
    <div class="brand-logo">Red Diamond</div>
    <div class="brand-logo">Chem Trend</div>
    <div class="brand-logo">Dosatron</div>
    <div class="brand-logo">Larsen & Toubro</div>
    <div class="brand-logo">Tata Steel</div>
  </div>
</div>

<!-- CONTACT -->
<section id="contact" class="section">
  <div class="section-header">
    <div class="title">Get in Touch</div>
    <div class="underline"></div>
    <div class="subtitle">Ready to optimize your operations? Send us a request.</div>
  </div>
  <div class="contact-wrap">
    <form id="leadForm" action="https://formspree.io/f/mrbonlar" method="POST">
      <div class="grid-2" style="gap:20px;margin-bottom:20px">
        <input class="form-input" name="name" id="nameField" placeholder="Full Name" required />
        <input class="form-input" name="email" id="emailField" type="email" placeholder="Email Address" required />
      </div>
      <div class="grid-2" style="gap:20px;margin-bottom:20px">
        <input class="form-input" name="company" id="companyField" placeholder="Company Name" />
        <input class="form-input" name="phone" id="phoneField" placeholder="Phone Number" />
      </div>
      <textarea class="form-textarea" name="message" id="messageField" rows="5" placeholder="Tell us about your requirements..."></textarea>
      <div style="margin-top:24px;display:flex;gap:16px;justify-content:center">
        <button class="btn btn-primary" type="submit" style="padding:16px 40px;font-size:16px">Send Message</button>
        <a class="btn btn-ghost" href="https://wa.me/919095195647" target="_blank">WhatsApp Us</a>
      </div>
    </form>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="footer-inner">
    <div class="footer-col">
      <div style="font-size:24px;font-weight:800;font-family:'Poppins';margin-bottom:16px">BEST MARKETING CO.</div>
      <p style="color:#94a3b8;font-size:14px;line-height:1.6;margin-bottom:24px">Your trusted partner for industrial valves, automation, and consumables. Delivering excellence since 1995.</p>
      <div style="display:flex;gap:12px">
        <!-- Social placeholders -->
        <div style="width:32px;height:32px;background:rgba(255,255,255,0.1);border-radius:50%"></div>
        <div style="width:32px;height:32px;background:rgba(255,255,255,0.1);border-radius:50%"></div>
        <div style="width:32px;height:32px;background:rgba(255,255,255,0.1);border-radius:50%"></div>
      </div>
    </div>
    <div class="footer-col">
      <h4>Company</h4>
      <a href="#who">About Us</a>
      <a href="#cases">Case Studies</a>
      <a href="#investors">Investors</a>
      <a href="#admin">Admin Portal</a>
    </div>
    <div class="footer-col">
      <h4>Solutions</h4>
      <a href="#services">Industrial Supply</a>
      <a href="#services">Automation</a>
      <a href="#services">Consultancy</a>
      <a href="#products">Product Catalog</a>
    </div>
    <div class="footer-col">
      <h4>Contact</h4>
      <a href="tel:9095195647">üìû +91 90951 95647</a>
      <a href="mailto:gokilavaratharaj142@gmail.com">‚úâ gokilavaratharaj142@gmail.com</a>
      <div class="newsletter-box">
        <input id="newsletterEmail" type="email" placeholder="Email for newsletter">
        <button id="newsletterSubscribe" class="btn btn-primary" style="padding:10px">OK</button>
      </div>
    </div>
  </div>
  <div style="text-align:center;margin-top:60px;padding-top:20px;border-top:1px solid rgba(255,255,255,0.1);color:#64748b;font-size:13px">
    &copy; 2026 BEST MARKETING COMPANY. All rights reserved.
  </div>
</footer>

<!-- ADMIN PORTAL -->
<section id="admin" class="admin-fullpage">
  <!-- Login View -->
  <div id="adminLoginWrap" style="max-width:420px;margin:10vh auto;text-align:center">
    <div style="background:#fff;padding:48px;border-radius:24px;box-shadow:var(--shadow-lg)">
      <div style="font-family:'Poppins';font-weight:800;font-size:24px;color:var(--primary);margin-bottom:8px">BMC ADMIN</div>
      <p style="color:#64748b;margin-bottom:32px;font-size:14px">Secure Access Portal</p>
      
      <input type="text" id="loginUser" class="form-input" placeholder="Username / Email" style="margin-bottom:16px">
      <input type="password" id="loginPass" class="form-input" placeholder="Password" style="margin-bottom:16px">
      
      <div id="otpGroup" style="display:none;margin-bottom:16px;text-align:left">
        <label style="font-size:12px;font-weight:600;display:block;margin-bottom:4px">OTP Verification</label>
        <div style="display:flex;gap:8px">
          <input type="text" id="loginOTP" class="form-input" placeholder="Enter Code" style="letter-spacing:2px;font-weight:700">
          <button id="sendOTP" class="btn btn-ghost" style="padding:0 12px;font-size:12px">Resend</button>
        </div>
      </div>

      <button id="loginBtn" class="btn btn-primary" style="width:100%;justify-content:center;margin-bottom:16px">Sign In</button>
      <div id="loginError" style="color:#ef4444;font-size:13px;min-height:20px"></div>
      
      <div style="margin-top:24px;font-size:13px;color:#94a3b8">
        <a href="#" onclick="alert('Reset link sent to admin email');return false">Forgot Password?</a>
      </div>
    </div>
  </div>

  <!-- Dashboard View -->
  <div id="adminDashboard" style="display:none">
    <div class="dashboard-grid">
      <!-- Sidebar -->
      <aside class="sidebar-admin">
        <div style="font-weight:800;font-size:20px;margin-bottom:40px;color:var(--primary);padding-left:12px;border-left:4px solid var(--accent)">BMC DASHBOARD</div>
        <nav style="display:flex;flex-direction:column;gap:8px">
           <button class="btn btn-ghost" style="justify-content:flex-start;background:#f1f5f9;border:none">üìä &nbsp; Overview</button>
           <button class="btn btn-ghost" style="justify-content:flex-start;border:none">üì® &nbsp; Enquiries <span class="status-badge new" style="margin-left:auto">New</span></button>
           <button class="btn btn-ghost" style="justify-content:flex-start;border:none">üë• &nbsp; Staff</button>
           <button class="btn btn-ghost" style="justify-content:flex-start;border:none">üõ° &nbsp; Audit Logs</button>
           <button class="btn btn-ghost" onclick="document.getElementById('rpaSection').scrollIntoView({behavior:'smooth'})" style="justify-content:flex-start;border:none;color:var(--accent)">ü§ñ &nbsp; RPA Hub</button>
           <button class="btn btn-ghost" style="justify-content:flex-start;border:none">‚öôÔ∏è &nbsp; Settings</button>
           <div style="flex:1"></div>
           <button class="btn btn-ghost" id="adminLogout" style="justify-content:flex-start;color:#ef4444;border-color:#fee2e2;background:#fef2f2">Log Out</button>
        </nav>
      </aside>
      
      <!-- Main Content -->
      <main class="admin-content">
        <!-- Topbar -->
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:32px">
           <div>
             <h3 style="margin-bottom:4px">Welcome back, Admin</h3>
             <p style="color:#64748b;font-size:14px">Here is what's happening today.</p>
           </div>
           <div style="display:flex;gap:12px">
              <button id="autoReport" class="btn btn-ghost" style="font-size:13px">ü§ñ Auto Report</button>
              <button id="backupJSON" class="btn btn-primary" style="font-size:13px">Backup Data</button>
              <input type="file" id="restoreFile" style="display:none">
              <button id="restoreJSON" class="btn btn-ghost" style="font-size:13px">Restore</button>
           </div>
        </div>
        
        <!-- Stats Cards -->
        <div class="grid-3" style="margin-bottom:32px;grid-template-columns:repeat(3,1fr)">
           <div style="background:#f8fafc;padding:24px;border-radius:16px;border:1px solid var(--border)">
              <div style="font-size:13px;color:#64748b;font-weight:600;text-transform:uppercase">Total Leads</div>
              <div style="font-size:36px;font-weight:700;color:var(--primary);margin:8px 0" id="leadCount">0</div>
              <div style="font-size:12px;color:#10b981">‚ñ≤ 12% vs last month</div>
           </div>
           <div style="background:#f8fafc;padding:24px;border-radius:16px;border:1px solid var(--border)">
              <div style="font-size:13px;color:#64748b;font-weight:600;text-transform:uppercase">Pending Actions</div>
              <div style="font-size:36px;font-weight:700;color:var(--accent);margin:8px 0">5</div>
              <div style="font-size:12px;color:#f59e0b">Needs attention</div>
           </div>
           <div style="background:#f8fafc;padding:24px;border-radius:16px;border:1px solid var(--border)">
              <div style="font-size:13px;color:#64748b;font-weight:600;text-transform:uppercase">System Status</div>
              <div style="font-size:36px;font-weight:700;color:#10b981;margin:8px 0">98%</div>
              <div style="font-size:12px;color:#64748b">All systems operational</div>
           </div>
        </div>

        <!-- Analytics Chart -->
        <div style="margin-bottom:32px;background:#fff;border:1px solid var(--border);border-radius:16px;padding:24px">
           <h4 style="margin-bottom:20px">Enquiry Analytics</h4>
           <div style="height:300px"><canvas id="leadsChart"></canvas></div>
        </div>

        <!-- Leads Table Section -->
        <div>
           <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
              <h4>Recent Enquiries</h4>
              <div style="display:flex;gap:12px">
                 <input id="adminFilterTop" placeholder="Search leads..." class="form-input" style="padding:8px 16px;width:240px;height:40px">
                 <button id="exportCSV_top" class="btn btn-ghost" style="height:40px">Export CSV</button>
                 <button id="clearLeads_top" class="btn btn-ghost" style="height:40px;color:#ef4444;border-color:#fee2e2">Clear</button>
              </div>
           </div>
           <div id="leadListAdmin" style="display:grid;gap:12px"></div>
        </div>

        <!-- RPA HUB SECTION -->
        <div id="rpaSection" style="margin-top:40px;margin-bottom:40px;padding:32px;background:#f8fafc;border-radius:16px;border:1px solid var(--border)">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px">
            <div>
              <h4 style="margin-bottom:4px;display:flex;align-items:center;gap:8px"><span style="font-size:24px">ü§ñ</span> RPA Automation Hub</h4>
              <p style="color:#64748b;font-size:13px">Automate repetitive tasks with one click.</p>
            </div>
            <div class="status-badge new">AI Powered</div>
          </div>
          
          <div class="grid-3" style="grid-template-columns:repeat(3,1fr);gap:20px">
            <!-- PDF to Word -->
            <div style="background:#fff;padding:20px;border-radius:12px;border:1px solid var(--border);text-align:center">
               <div style="font-size:32px;margin-bottom:12px">üìÑ ‚ûî üìù</div>
               <div style="font-weight:700;margin-bottom:4px">PDF to Word</div>
               <p style="font-size:12px;color:#64748b;margin-bottom:16px">Convert contracts & invoices instantly.</p>
               <button class="btn btn-ghost" onclick="simulateRPA('PDF to Word Converter')" style="width:100%;justify-content:center;font-size:12px">Start Task</button>
            </div>
    
            <!-- Word to Excel -->
            <div style="background:#fff;padding:20px;border-radius:12px;border:1px solid var(--border);text-align:center">
               <div style="font-size:32px;margin-bottom:12px">üìù ‚ûî üìä</div>
               <div style="font-weight:700;margin-bottom:4px">Word to Excel</div>
               <p style="font-size:12px;color:#64748b;margin-bottom:16px">Extract tables & data points.</p>
               <button class="btn btn-ghost" onclick="simulateRPA('Word to Excel Extractor')" style="width:100%;justify-content:center;font-size:12px">Start Task</button>
            </div>
    
            <!-- Data Entry Bot -->
            <div style="background:#fff;padding:20px;border-radius:12px;border:1px solid var(--border);text-align:center">
               <div style="font-size:32px;margin-bottom:12px">‚å®Ô∏è ü§ñ</div>
               <div style="font-weight:700;margin-bottom:4px">Data Entry Bot</div>
               <p style="font-size:12px;color:#64748b;margin-bottom:16px">Auto-fill forms from scanned docs.</p>
               <button class="btn btn-ghost" onclick="simulateRPA('Data Entry Bot')" style="width:100%;justify-content:center;font-size:12px">Run Bot</button>
            </div>
          </div>
        </div>

        <!-- Audit Log Section -->
        <div style="margin-top:40px;padding-top:40px;border-top:1px solid var(--border)">
           <h4 style="margin-bottom:16px">System Audit Log</h4>
           <div id="auditList" style="max-height:200px;overflow-y:auto;background:#f8fafc;border-radius:12px;padding:16px;font-size:13px;font-family:monospace"></div>
        </div>
      </main>
    </div>
  </div>
</section>

<!-- BACK TOP -->
<a href="#" id="backTop" style="position:fixed;bottom:30px;right:30px;background:var(--accent);color:#fff;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:24px;box-shadow:var(--shadow-lg);z-index:900;opacity:0;transition:0.3s;pointer-events:none">‚Üë</a>

<!-- TOASTS -->
<div class="toast-wrap" id="toastWrap" aria-hidden="true"></div>

<script>
/* ---------- Preloader & Setup ---------- */
window.addEventListener('load', () => {
  const preloader = document.getElementById('preloader');
  const bar = document.getElementById('loaderProgress');
  if(preloader && bar){
    bar.style.width = '100%';
    setTimeout(() => {
      gsap.to(preloader, { opacity: 0, duration: 0.6, onComplete: () => preloader.style.display = 'none' });
      // Trigger Hero Animations
      gsap.from('.hero-h', { y: 30, opacity: 0, duration: 1, delay: 0.2, ease: 'power3.out' });
      gsap.from('.hero-sub', { y: 20, opacity: 0, duration: 1, delay: 0.4, ease: 'power3.out' });
      gsap.from('.hero-btns', { y: 20, opacity: 0, duration: 1, delay: 0.6, ease: 'power3.out' });
      gsap.from('.stat-item', { y: 20, opacity: 0, duration: 0.8, stagger: 0.1, delay: 0.8, ease: 'power3.out' });
    }, 600);
  }
});

/* ---------- Helpers ---------- */
function showToast(text, duration = 3500) {
  const wrap = document.getElementById('toastWrap');
  if(!wrap) return;
  const t = document.createElement('div');
  t.className = 'toast';
  t.innerText = text;
  wrap.appendChild(t);
  // animate in
  requestAnimationFrame(()=> {
    t.style.opacity = '1';
    t.style.transform = 'translateY(0)';
  });
  setTimeout(()=> {
    t.style.opacity = '0';
    t.style.transform = 'translateY(10px)';
    setTimeout(()=> { t.remove(); }, 350);
  }, duration);
}

/* ---------- GSAP registration ---------- */
gsap.registerPlugin(ScrollTrigger);

/* ---------- Progress bar ---------- */
(function(){
  const bar = document.getElementById('scroll-progress');
  function update(){
    const total = document.documentElement.scrollHeight - window.innerHeight;
    const pct = (window.scrollY / Math.max(1,total)) * 100;
    gsap.to(bar, { width: pct + '%', duration: 0.12, ease: 'power1.out' });
  }
  window.addEventListener('scroll', update);
  update();
})();

/* ---------- Hero parallax and rotation ---------- */
(function(){
  // Parallax on mouse
  const right = document.querySelector('.hero-right img');
  if(right){
    window.addEventListener('mousemove', e => {
      const cx = window.innerWidth/2, cy = window.innerHeight/2;
      const dx = (e.clientX - cx) / cx;
      const dy = (e.clientY - cy) / cy;
      gsap.to(right, { x: dx * 6, y: dy * 4, duration: 0.9, ease: 'power1.out' });
    });
  }

  // Smooth text rotation
  const phrases = [
    "Engineering Solutions for Modern Industries",
    "Delivering Reliability for Industrial Operations",
    "Precision. Performance. Industrial Excellence."
  ];
  const heading = document.getElementById('heroHeading');
  if(heading){
    let idx = 0;
    function swap(n){
      gsap.to(heading, { opacity: 0, y: 8, duration: .45, ease: 'power2.in', onComplete: () => {
        heading.textContent = phrases[n];
        gsap.to(heading, { opacity: 1, y: 0, duration: .55, ease: 'power2.out' });
      }});
    }
    setInterval(()=> { idx = (idx + 1) % phrases.length; swap(idx); }, 5000);
  }
})();

/* ---------- GSAP reveals ---------- */
// About
gsap.from('#who img', { x: -30, opacity: 0, duration: 1, ease: 'power3.out', scrollTrigger: { trigger: '#who', start: 'top 80%' } });
gsap.from('#who .content', { x: 30, opacity: 0, duration: 1, delay: 0.2, ease: 'power3.out', scrollTrigger: { trigger: '#who', start: 'top 80%' } });

// Services
gsap.from('.service-card', { y: 40, opacity: 0, duration: 0.8, stagger: 0.1, ease: 'power3.out', scrollTrigger: { trigger: '#services', start: 'top 85%' } });

// Products
gsap.from('.highlight-card', { y: 30, opacity: 0, duration: 0.8, stagger: 0.1, ease: 'power3.out', scrollTrigger: { trigger: '#products', start: 'top 85%' } });

// Case Studies
gsap.from('.case-card', { y: 30, opacity: 0, duration: 0.8, stagger: 0.1, ease: 'power3.out', scrollTrigger: { trigger: '#cases', start: 'top 85%' } });

// Gallery
gsap.from('.gallery-item', { scale: 0.9, opacity: 0, duration: 0.8, stagger: 0.05, ease: 'back.out(1.7)', scrollTrigger: { trigger: '#gallery', start: 'top 85%' } });

// Contact
gsap.from('.contact-wrap', { y: 40, opacity: 0, duration: 1, ease: 'power3.out', scrollTrigger: { trigger: '#contact', start: 'top 80%' } });


/* ---------- Metrics counters ---------- */
(function(){
  const nums = document.querySelectorAll('.metric .num');
  function animate(){
    nums.forEach(el => {
      if(el.dataset.animated) return;
      const target = +el.dataset.target || 0;
      gsap.fromTo(el, { innerText: 0 }, {
        innerText: target,
        duration: 1.6,
        ease: 'power1.out',
        snap: { innerText: 1 },
        onUpdate(){ el.textContent = Math.floor(el.innerText); },
        onStart(){ el.dataset.animated = '1'; }
      });
    });
  }
  ScrollTrigger.create({ trigger:'.metrics-row', start:'top 90%', onEnter: animate });
})();

/* ---------- Product Modal & Enquire auto-fill ---------- */
(function(){
  const highlights = document.querySelectorAll('.highlight');
  const modal = document.getElementById('productModal');
  const modalTitle = document.getElementById('modalTitle');
  const modalDesc = document.getElementById('modalDesc');
  const closeBtn = document.getElementById('closeModal');
  const closeGhost = document.getElementById('modalCloseGhost');
  const enquireBtn = document.getElementById('enquireProduct');
  const messageField = document.getElementById('messageField');

  highlights.forEach(h => {
    h.addEventListener('click', () => {
      const title = h.dataset.title || h.querySelector('strong')?.innerText || 'Product';
      const desc = h.dataset.desc || h.querySelector('div')?.innerText || '';
      modalTitle.textContent = title;
      modalDesc.textContent = desc;
      modal.style.display = 'flex';
      modal.setAttribute('aria-hidden','false');
    });
  });

  closeBtn.addEventListener('click', ()=>{ modal.style.display = 'none'; modal.setAttribute('aria-hidden','true'); });
  closeGhost.addEventListener('click', ()=>{ modal.style.display = 'none'; modal.setAttribute('aria-hidden','true'); });
  modal.addEventListener('click', e=>{ if(e.target === modal) { modal.style.display='none'; modal.setAttribute('aria-hidden','true'); } });

  enquireBtn.addEventListener('click', ()=>{
    const title = modalTitle.textContent || '';
    const desc = modalDesc.textContent || '';
    if(messageField) messageField.value = `Enquiry: ${title} ‚Äî ${desc}`;
    modal.style.display = 'none';
    modal.setAttribute('aria-hidden','true');
    document.querySelector('#contact').scrollIntoView({behavior:'smooth'});
    setTimeout(()=> { if(messageField) messageField.focus(); }, 600);
  });
})();

/* ---------- Leads module (localStorage + Firebase) ---------- */
const Leads = (function(){
  const KEY = 'bm_leads_v5';
  let db = null;
  
  // Firebase Configuration - REPLACE WITH YOUR ACTUAL KEYS
  // To enable Database: 1. Create project at console.firebase.google.com
  // 2. Add web app & copy config here. 3. Enable Firestore Database
  const firebaseConfig = {
    apiKey: "AIzaSyDummyKey-ReplaceMe",
    authDomain: "best-marketing-company.firebaseapp.com",
    projectId: "best-marketing-company",
    storageBucket: "best-marketing-company.appspot.com",
    messagingSenderId: "123456789",
    appId: "1:123456789:web:abcdef"
  };

  try {
    if(window.firebase && !firebase.apps.length) {
      // Uncomment the line below to enable Firebase
      // firebase.initializeApp(firebaseConfig); 
      // db = firebase.firestore();
      console.log('Firebase ready to init. Set config keys to enable Cloud DB.');
    }
  } catch(e){ console.error('Firebase init error', e); }

  function safeParse(s){ try{return JSON.parse(s);}catch(e){return[];} }
  function get(){ return safeParse(localStorage.getItem(KEY) || '[]'); }
  
  function save(lead){ 
    const arr=get(); 
    arr.unshift(lead); 
    localStorage.setItem(KEY,JSON.stringify(arr)); 
    renderLeadsAdmin();
    
    // Sync to Cloud
    if(db){
      db.collection('leads').add(lead)
        .then(()=> console.log('Lead saved to Firestore'))
        .catch(err=> console.error('Firestore save error', err));
    }
  }
  
  function clearAll(){ 
    if(confirm('Clear local data? Cloud data will remain safe.')){
        localStorage.removeItem(KEY); 
        renderLeadsAdmin(); 
    }
  }

  async function sync(){
    if(!db) { alert('Cloud Database not connected. Please configure Firebase keys in source code.'); return; }
    try {
        const snap = await db.collection('leads').orderBy('time', 'desc').get();
        const remoteLeads = [];
        snap.forEach(doc => remoteLeads.push(doc.data()));
        if(remoteLeads.length){
            // Merge or overwrite? Let's overwrite local for consistency
            localStorage.setItem(KEY, JSON.stringify(remoteLeads));
            renderLeadsAdmin();
            alert('Success! Synced ' + remoteLeads.length + ' leads from Cloud.');
        } else {
            alert('Connected to Cloud, but no leads found there.');
        }
    } catch(e) {
        console.error(e);
        alert('Sync failed: ' + e.message);
    }
  }

  function exportCSV(filename='leads.csv'){
    const arr=get();
    if(!arr.length){ alert('No leads to export.'); return; }
    const headers = ['time','name','email','phone','company','message'];
    const rows = [headers.join(',')];
    arr.forEach(r => {
      const vals = headers.map(h => {
        const v = r[h] == null ? '' : String(r[h]).replace(/"/g,'""');
        return `"${v}"`;
      });
      rows.push(vals.join(','));
    });
    const blob = new Blob([rows.join('\n')], { type: 'text/csv' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = filename; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  }
  return { get, save, clear: clearAll, exportCSV, sync };
})();

const Audit = (function(){
  const KEY = 'bm_audit_v1';
  function safeParse(s){ try{return JSON.parse(s);}catch(e){return[];} }
  function get(){ return safeParse(localStorage.getItem(KEY) || '[]'); }
  function log(event, meta){ const arr=get(); arr.unshift({ event, meta, time: Date.now() }); localStorage.setItem(KEY, JSON.stringify(arr)); renderAudit(); }
  function clear(){ localStorage.removeItem(KEY); renderAudit(); }
  return { get, log, clear };
})();

function renderAudit(){
  const el = document.getElementById('auditList');
  if(!el) return;
  const arr = Audit.get();
  el.innerHTML = arr.map(a=>`<div style="padding:8px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between">
    <div style="font-weight:700">${a.event}</div>
    <div style="color:var(--muted);font-size:12px">${new Date(a.time).toLocaleString()}</div>
  </div>`).join('');
}

function renderLeadsAdmin(filter=''){
  const el = document.getElementById('leadListAdmin');
  if(!el) return;
  const arr = Leads.get();
  const f = (filter||'').toLowerCase();
  const filtered = arr.filter(l => {
    if(!f) return true;
    return (l.name + ' ' + l.email + ' ' + l.company + ' ' + l.message).toLowerCase().includes(f);
  });
  el.innerHTML = filtered.map(l => {
    return `<div style="background:#fff;padding:12px;border-radius:8px;margin-bottom:10px;border:1px solid rgba(0,0,0,0.04);box-shadow:0 10px 20px rgba(0,0,0,0.04)">
      <div style="font-weight:800">${l.name||'‚Äî'}</div>
      <div style="color:var(--muted);font-size:13px">${l.email||''}${l.phone? ' | ' + l.phone: ''}${l.company? ' | ' + l.company: ''}</div>
      <div style="margin-top:8px">${l.message||''}</div>
      <div style="margin-top:8px;display:flex;justify-content:space-between;align-items:center">
         <div style="font-size:12px;color:var(--muted)">${new Date(l.time).toLocaleString()}</div>
         <button class="btn btn-ghost" style="padding:4px 8px;font-size:11px;border:1px solid var(--border)" onclick="alert('RPA Bot: Follow-up email scheduled for ${l.email}');Audit.log('rpa_followup',{email:'${l.email}'})">ü§ñ Auto-Follow Up</button>
      </div>
    </div>`;
  }).join('');
  const leadCountEl = document.getElementById('leadCount');
  if(leadCountEl) leadCountEl.textContent = String(arr.length);
  renderChartAnalytics(arr);
}

/* ---------- Form handling (submit -> Formspree + save locally + toast) ---------- */
document.addEventListener('DOMContentLoaded', ()=>{
  // render admin if already logged
  const token = sessionStorage.getItem('bm_admin_auth');
  if(token) showAdminDashboard();

  // render leads initially
  renderLeadsAdmin();
  renderAudit();

  // form submit
  const form = document.getElementById('leadForm');
  if(form){
    form.addEventListener('submit', e=>{
      // allow default Formspree to proceed, but also save locally and show toast
      const fd = new FormData(form);
      const lead = {
        time: Date.now(),
        name: fd.get('name') || '',
        email: fd.get('email') || '',
        phone: fd.get('phone') || '',
        company: fd.get('company') || '',
        message: fd.get('message') || ''
      };
      // save locally
      Leads.save(lead);
      // show toast
      showToast('‚úì Thank You...Request received ‚Äî we‚Äôll contact you soon.');
      Audit.log('new_enquiry', { email: lead.email });
      showToast('Email notifications queued');
      Audit.log('email_notification', { to: lead.email });
      // do not prevent default so Formspree still works
    });
  }

  // admin form actions (top admin controls)
  const adminFilterTop = document.getElementById('adminFilterTop');
  if(adminFilterTop) adminFilterTop.addEventListener('input', e=> renderLeadsAdmin(e.target.value));
  const exportTop = document.getElementById('exportCSV_top');
  if(exportTop) exportTop.addEventListener('click', ()=> { Leads.exportCSV(); Audit.log('export_csv', {}); });
  const clearTop = document.getElementById('clearLeads_top');
  if(clearTop) clearTop.addEventListener('click', ()=> { if(confirm('Clear all leads?')) { Leads.clear(); Audit.log('clear_leads', {}); } });
  const autoReportBtn = document.getElementById('autoReport');
  if(autoReportBtn){
    autoReportBtn.addEventListener('click', ()=>{
        const generating = document.createElement('div');
        generating.style.position='fixed'; generating.style.top='50%'; generating.style.left='50%'; generating.style.transform='translate(-50%,-50%)';
        generating.style.background='#fff'; generating.style.padding='20px'; generating.style.border='1px solid #ccc'; generating.style.zIndex='9999';
        generating.style.boxShadow='0 10px 30px rgba(0,0,0,0.2)'; generating.style.borderRadius='8px';
        generating.innerText = 'ü§ñ RPA Bot: Generating Monthly Report...';
        document.body.appendChild(generating);
        setTimeout(()=>{
            generating.remove();
            showToast('Monthly Report Generated & Emailed to Admin');
            Audit.log('auto_report_gen', { status: 'success' });
        }, 2000);
    });
  }
  const backupBtn = document.getElementById('backupJSON');
  const restoreBtn = document.getElementById('restoreJSON');
  const restoreFile = document.getElementById('restoreFile');
  if(backupBtn) backupBtn.addEventListener('click', ()=>{
    const payload = { leads: Leads.get(), audit: Audit.get() };
    const blob = new Blob([JSON.stringify(payload, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'backup.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    showToast('Backup downloaded');
    Audit.log('backup_download', {});
  });
  if(restoreBtn && restoreFile){
    restoreBtn.addEventListener('click', ()=> restoreFile.click());
    restoreFile.addEventListener('change', ()=>{
      const f = restoreFile.files[0]; if(!f) return;
      const r = new FileReader();
      r.onload = ()=>{
        try{
          const obj = JSON.parse(String(r.result||'{}'));
          if(Array.isArray(obj.leads)) localStorage.setItem('bm_leads_v5', JSON.stringify(obj.leads));
          if(Array.isArray(obj.audit)) localStorage.setItem('bm_audit_v1', JSON.stringify(obj.audit));
          renderLeadsAdmin(); renderAudit();
          showToast('Data restored');
          Audit.log('restore_data', {});
        }catch(e){ alert('Invalid backup file'); }
      };
      r.readAsText(f);
    });
  }

  // quick menu also saves quick action leads
  document.querySelectorAll('.quick-menu a').forEach(a=>{
    a.addEventListener('click', ()=> {
      Leads.save({ time: Date.now(), name: 'Quick Action', email:'', phone:'', company:'', message: a.textContent || '' });
    });
  });

  // newsletter subscribe
  const subEmail = document.getElementById('newsletterEmail');
  const subBtn = document.getElementById('newsletterSubscribe');
  if(subBtn && subEmail){
    subBtn.addEventListener('click', ()=>{
      const email = (subEmail.value || '').trim();
      if(!email || !/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(email)){
        showToast('Enter a valid email to subscribe');
        return;
      }
      Leads.save({ time: Date.now(), name: 'Newsletter', email, phone:'', company:'', message: 'Newsletter Subscription' });
      showToast('Subscribed successfully');
      Audit.log('newsletter_sub', { email });
      subEmail.value = '';
    });
  }
});

/* ---------- Admin Login / Dashboard in same file ---------- */
(function(){
  const adminWrap = document.getElementById('adminLoginWrap');
  const adminSection = document.getElementById('admin');
  const adminDashboard = document.getElementById('adminDashboard');
  const loginBtn = document.getElementById('loginBtn');
  const cancelLogin = document.getElementById('cancelLogin');
  const loginError = document.getElementById('loginError');
  const logoutBtn = document.getElementById('adminLogout');
  const exportCSV_top = document.getElementById('exportCSV_top');
  const clearLeads_top = document.getElementById('clearLeads_top');
  const sendOTPBtn = document.getElementById('sendOTP');
  const otpInput = document.getElementById('loginOTP');
  const users = [
    { user: 'admin', role: 'Admin', hash: bcrypt.hashSync('admin123', '$2a$10$abcdefghijklmnopqrstuu') },
    { user: 'manager', role: 'Manager', hash: bcrypt.hashSync('manager123', '$2a$10$abcdefghijklmnopqrstuu') },
    { user: 'staff', role: 'Staff', hash: bcrypt.hashSync('staff123', '$2a$10$abcdefghijklmnopqrstuu') }
  ];
  let pendingOTP = null;
  let pendingUser = null;

  function showAdminLogin(){
    adminSection.style.display = 'block';
    adminSection.setAttribute('aria-hidden','false');
    adminWrap.style.display = 'block';
    adminDashboard.style.display = 'none';
    document.querySelector('html,body').scrollTop = adminSection.offsetTop;
  }

  window.showAdminDashboard = function(){
    adminSection.style.display = 'block';
    adminSection.setAttribute('aria-hidden','false');
    adminWrap.style.display = 'none';
    adminDashboard.style.display = 'block';
    renderLeadsAdmin();
    document.querySelector('html,body').scrollTop = adminSection.offsetTop;
  }

  // if URL has #admin, open login
  if(location.hash === '#admin') {
    showAdminLogin();
  }

  // admin nav click -> open login
  const adminNav = document.getElementById('adminNav');
  if(adminNav){
    adminNav.addEventListener('click', (e)=>{
      e.preventDefault();
      history.replaceState(null, '', '#admin');
      showAdminLogin();
    });
  }

  // cancel login -> hide admin section
  if(cancelLogin){
    cancelLogin.addEventListener('click', ()=>{
      adminSection.style.display = 'none';
      adminSection.setAttribute('aria-hidden','true');
      history.replaceState(null, '', ' ');
    });
  }

  // Forgot Password
  const forgotLink = document.getElementById('forgotPass');
  if(forgotLink){
    forgotLink.addEventListener('click', e=>{
      e.preventDefault();
      const user = prompt('Enter your username or email to reset password:');
      if(user){
         // In a real app, this would call an API
         showToast('Password reset link sent to registered email.');
         Audit.log('forgot_pass', { user });
      }
    });
  }

  if(sendOTPBtn){
    sendOTPBtn.addEventListener('click', ()=>{
      const user = document.getElementById('loginUser').value.trim();
      const pass = document.getElementById('loginPass').value.trim();
      loginError.style.display = 'none';
      const u = users.find(x=>x.user===user);
      if(!u){ loginError.innerText = 'Invalid username.'; loginError.style.display='block'; return; }
      if(!bcrypt.compareSync(pass, u.hash)){ loginError.innerText='Incorrect password.'; loginError.style.display='block'; return; }
      pendingOTP = String(Math.floor(100000 + Math.random()*900000));
      pendingUser = u;
      otpInput.style.display = 'block';
      showToast('OTP sent to registered channel: ' + pendingOTP);
      Audit.log('send_otp', { user });
    });
  }

  if(loginBtn){
    loginBtn.addEventListener('click', ()=>{
      const user = document.getElementById('loginUser').value.trim();
      const pass = document.getElementById('loginPass').value.trim();
      const otp = otpInput.value.trim();
      loginError.style.display = 'none';
      const u = users.find(x=>x.user===user);
      if(!u){ loginError.innerText = 'Invalid credentials.'; loginError.style.display='block'; return; }
      const passOk = bcrypt.compareSync(pass, u.hash);
      if(!passOk){ loginError.innerText = 'Invalid credentials.'; loginError.style.display='block'; return; }
      if(!pendingOTP || !pendingUser || pendingUser.user!==user){ loginError.innerText='Please click Send OTP.'; loginError.style.display='block'; return; }
      if(otp !== pendingOTP){ loginError.innerText='Incorrect OTP.'; loginError.style.display='block'; return; }
      const payload = { user: u.user, role: u.role, iat: Math.floor(Date.now()/1000) };
      const token = btoa(JSON.stringify({alg:'none',typ:'JWT'})) + '.' + btoa(JSON.stringify(payload)) + '.';
      sessionStorage.setItem('bm_admin_auth', token);
      sessionStorage.setItem('bm_admin_role', u.role);
      pendingOTP = null;
      pendingUser = null;
      Audit.log('login_success', { user: u.user, role: u.role });
      showAdminDashboard();
    });
  }

  // logout
  if(logoutBtn){
    logoutBtn.addEventListener('click', ()=>{
      sessionStorage.removeItem('bm_admin_auth');
      sessionStorage.removeItem('bm_admin_role');
      // hide admin
      document.getElementById('admin').style.display = 'none';
      document.getElementById('admin').setAttribute('aria-hidden','true');
      history.replaceState(null, '', ' ');
      showToast('Logged out of admin.');
      Audit.log('logout', {});
    });
  }

  // hook top export/clear also
  if(document.getElementById('syncCloud')) document.getElementById('syncCloud').addEventListener('click', ()=> Leads.sync());

  const role = sessionStorage.getItem('bm_admin_role');
  const isAdmin = role === 'Admin';
  const isManager = role === 'Manager';
  if(!isAdmin){
    ['clearLeads_top','backupJSON','restoreJSON','autoReport'].forEach(id=>{
      const el = document.getElementById(id);
      if(el) el.style.display = 'none';
    });
  }

})();

/* ---------- Mega menu & industries dropdown ---------- */
(function(){
  const sol = document.querySelector('.solutions-link');
  const navInner = document.querySelector('.main-nav-inner');

  const mega = document.createElement('div');
  mega.className = 'mega-menu';
  mega.style.display = 'none';
  mega.style.position = 'absolute';
  mega.style.top = '100%';
  mega.style.left = '0';
  mega.style.width = '100%';
  mega.style.background = '#fff';
  mega.style.border = '1px solid var(--border)';
  mega.style.boxShadow = '0 20px 40px rgba(11,31,51,0.08)';
  mega.style.padding = '18px 24px';
  mega.innerHTML = `<div style="max-width:var(--container);margin:0 auto"><div style="display:grid;grid-template-columns:repeat(3,1fr);gap:22px;padding:18px 0">
    <div><div style="font-weight:900;color:var(--accent);margin-bottom:10px">Industrial Equipment</div><div style="color:var(--muted);margin-bottom:6px">Valves & Actuation</div><div style="color:var(--muted);margin-bottom:6px">Crucibles & Melting</div><div style="color:var(--muted)">Foundry Consumables</div></div>
    <div><div style="font-weight:900;color:var(--accent);margin-bottom:10px">Automation</div><div style="color:var(--muted);margin-bottom:6px">Dosing Pumps</div><div style="color:var(--muted);margin-bottom:6px">Control Systems</div><div style="color:var(--muted)">Process Monitoring</div></div>
    <div><div style="font-weight:900;color:var(--accent);margin-bottom:10px">Services</div><div style="color:var(--muted);margin-bottom:6px">Consultancy</div><div style="color:var(--muted);margin-bottom:6px">On-Site Support</div><div style="color:var(--muted)">After-Sales</div></div>
  </div></div>`;
  navInner.appendChild(mega);

  if(sol){
    sol.addEventListener('mouseenter', ()=> { mega.style.display='block'; });
    sol.addEventListener('mouseleave', ()=> { setTimeout(()=>{ if(!mega.matches(':hover')) mega.style.display='none'; }, 120); });
    mega.addEventListener('mouseleave', ()=> { mega.style.display='none'; });
    sol.addEventListener('click', e=> { if(window.innerWidth <= 900){ e.preventDefault(); mega.style.display = (mega.style.display==='block') ? 'none' : 'block'; } });
  }

  // industries dropdown
  const indLink = document.querySelector('.industries-link');
  const indDrop = document.createElement('div');
  indDrop.className = 'dropdown';
  indDrop.style.display = 'none';
  indDrop.style.position = 'absolute';
  indDrop.style.top = '100%';
  indDrop.style.left = '0';
  indDrop.style.padding = '10px';
  indDrop.style.width = '520px';
  indDrop.style.background = '#fff';
  indDrop.style.border = '1px solid var(--border)';
  indDrop.style.boxShadow = '0 20px 40px rgba(11,31,51,0.08)';
  indDrop.innerHTML = `<div style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px;padding:12px">
    <div style="padding:10px;border-radius:8px;background:#fafbfc;border:1px solid var(--border)">Foundry & Metal Casting</div>
    <div style="padding:10px;border-radius:8px;background:#fafbfc;border:1px solid var(--border)">Automotive Components</div>
    <div style="padding:10px;border-radius:8px;background:#fafbfc;border:1px solid var(--border)">Chemical Processing</div>
    <div style="padding:10px;border-radius:8px;background:#fafbfc;border:1px solid var(--border)">Manufacturing & Machinery</div>
    <div style="padding:10px;border-radius:8px;background:#fafbfc;border:1px solid var(--border)">Lubrication Plants</div>
    <div style="padding:10px;border-radius:8px;background:#fafbfc;border:1px solid var(--border)">Industrial Utilities</div>
  </div>`;
  navInner.appendChild(indDrop);

  if(indLink){
    indLink.addEventListener('mouseenter', ()=> { indDrop.style.display='block'; });
    indLink.addEventListener('mouseleave', ()=> { setTimeout(()=>{ if(!indDrop.matches(':hover')) indDrop.style.display='none'; }, 120); });
    indDrop.addEventListener('mouseleave', ()=> { indDrop.style.display='none'; });
    indLink.addEventListener('click', e=> { if(window.innerWidth <= 900){ e.preventDefault(); indDrop.style.display = (indDrop.style.display==='block') ? 'none' : 'block'; } });
  }
})();

/* ---------- Back to Top ---------- */
(function(){
  const btn = document.getElementById('backTop');
  if(!btn) return;
  window.addEventListener('scroll', ()=>{
    if(window.scrollY > 500) {
      btn.style.opacity = '1';
      btn.style.pointerEvents = 'all';
      btn.style.transform = 'translateY(0)';
    } else {
      btn.style.opacity = '0';
      btn.style.pointerEvents = 'none';
      btn.style.transform = 'translateY(10px)';
    }
  });
  btn.addEventListener('click', e=>{
    e.preventDefault();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });
})();

/* ---------- Mobile Menu ---------- */
(function(){
  const toggle = document.getElementById('mobileToggle');
  const menu = document.getElementById('mobileMenu');
  if(toggle && menu){
    toggle.addEventListener('click', ()=>{
      const isVis = menu.style.display === 'flex';
      menu.style.display = isVis ? 'none' : 'flex';
      toggle.innerHTML = isVis ? '‚ò∞' : '‚úï';
    });
    menu.querySelectorAll('a').forEach(a => {
      a.addEventListener('click', () => {
        menu.style.display = 'none';
        toggle.innerHTML = '‚ò∞';
      });
    });
  }
})();

/* ---------- Respect reduced motion ---------- */
if(window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches){
  gsap.globalTimeline.timeScale(0.001);
}
</script>
<script>
function renderChartAnalytics(leads){
  const ctx = document.getElementById('leadsChart');
  if(!ctx || !window.Chart) return;
  const byMonth = {};
  leads.forEach(l=>{
    const d = new Date(l.time);
    const k = d.getFullYear() + '-' + String(d.getMonth()+1).padStart(2,'0');
    byMonth[k] = (byMonth[k]||0) + 1;
  });
  const labels = Object.keys(byMonth).sort();
  const data = labels.map(k=>byMonth[k]);
  if(!labels.length){
    const now = new Date();
    const k = now.getFullYear() + '-' + String(now.getMonth()+1).padStart(2,'0');
    labels.push(k);
    data.push(0);
  }
  if(window._chartInstance){ window._chartInstance.destroy(); }
  window._chartInstance = new Chart(ctx, {
    type: 'line',
    data: {
      labels,
      datasets: [{ label: 'Monthly Enquiries', data, borderColor: '#3A6EA5', backgroundColor: 'rgba(58,110,165,0.18)', tension: 0.25, fill: true }]
    },
    options: { plugins:{legend:{display:true}}, scales:{x:{grid:{display:false}}, y:{beginAtZero:true}} }
  });
}
</script>
<div id="chatWidget" style="position:fixed;right:18px;bottom:18px;z-index:14000">
  <button id="chatToggle" class="quick-btn" style="padding:10px 16px">ü§ñ Support</button>
  <div id="chatPanel" style="display:none;width:320px;background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);margin-top:8px;overflow:hidden">
    <div style="padding:10px;border-bottom:1px solid var(--border);font-weight:800">AI Chatbot</div>
    <div id="chatLog" style="height:220px;overflow:auto;padding:10px"></div>
    <div style="display:flex;gap:8px;padding:10px;border-top:1px solid var(--border)">
      <input id="chatInput" placeholder="Type your question..." style="flex:1;padding:10px;border:1px solid var(--border);border-radius:8px">
      <button id="chatSend" class="btn btn-primary" style="padding:10px 12px">Send</button>
    </div>
  </div>
  </div>
<script>
/* ---------- Chatbot & RPA Simulation ---------- */
window.simulateRPA = function(task){
  const id = 'rpa-toast-' + Date.now();
  const d = document.createElement('div');
  d.id = id;
  d.style.position = 'fixed'; d.style.bottom = '30px'; d.style.left = '50%'; d.style.transform = 'translateX(-50%)';
  d.style.background = '#0f172a'; d.style.color = '#fff'; d.style.padding = '16px 24px'; d.style.borderRadius = '12px';
  d.style.boxShadow = '0 10px 30px rgba(0,0,0,0.2)'; d.style.zIndex = '99999'; d.style.display = 'flex'; d.style.alignItems = 'center'; d.style.gap = '12px';
  d.innerHTML = `<div class="loader-spinner" style="width:20px;height:20px;border:3px solid #fff;border-top-color:transparent;border-radius:50%;animation:spin 1s linear infinite"></div> 
                 <div><strong>${task}</strong><br><span style="font-size:12px;opacity:0.8">Processing...</span></div>`;
  document.body.appendChild(d);
  
  // inject spin keyframes if needed
  if(!document.getElementById('spinStyle')){
    const s = document.createElement('style'); s.id='spinStyle'; s.innerHTML='@keyframes spin{to{transform:rotate(360deg)}}'; document.head.appendChild(s);
  }

  setTimeout(()=>{
    d.innerHTML = `<div style="font-size:20px">‚úÖ</div><div><strong>${task} Completed</strong><br><span style="font-size:12px;opacity:0.8">Results saved to cloud.</span></div>`;
    d.style.background = '#10b981';
    if(window.Audit) Audit.log('rpa_task_complete', { task });
    setTimeout(()=>d.remove(), 3000);
  }, 2500);
};

(function(){
    const toggle = document.getElementById('chatToggle');
    const panel = document.getElementById('chatPanel');
    const log = document.getElementById('chatLog');
    const input = document.getElementById('chatInput');
    const send = document.getElementById('chatSend');
    
    function add(type, text){
      const d = document.createElement('div');
      d.style.marginBottom = '12px';
      d.innerHTML = `<div style="font-weight:${type==='bot'?'800':'700'};font-size:13px;margin-bottom:2px;color:${type==='bot'?'var(--accent)':'var(--text)'}">${type==='bot'?'BMC AI Agent':'You'}</div>
                     <div style="background:${type==='bot'?'#f1f5f9':'var(--primary)'};color:${type==='bot'?'#334155':'#fff'};padding:8px 12px;border-radius:8px;font-size:14px;line-height:1.5;display:inline-block;max-width:90%">${text}</div>`;
      d.style.textAlign = type==='bot' ? 'left' : 'right';
      log.appendChild(d);
      log.scrollTop = log.scrollHeight;
    }

    function reply(q){
      const s = q.toLowerCase();
      // Enhanced Logic
      if(s.includes('hello')||s.includes('hi')||s.includes('hey')) return 'Hello! Welcome to Best Marketing Company. How can I assist you with our industrial solutions today?';
      if(s.includes('product')||s.includes('valve')||s.includes('pump')) return 'We specialize in: <br>‚Ä¢ Industrial Valves<br>‚Ä¢ Dosing Pumps<br>‚Ä¢ Crucibles<br>‚Ä¢ Automation Systems<br>Would you like a catalog?';
      if(s.includes('price')||s.includes('cost')||s.includes('quote')) return 'I can arrange a custom quotation for you. Please provide your contact details or use the "Get Quote" form below.';
      if(s.includes('contact')||s.includes('location')||s.includes('address')) return 'üìç <strong>Coimbatore, India</strong><br>üìû 9095195647<br>‚úâÔ∏è gokilavaratharaj142@gmail.com';
      if(s.includes('admin')||s.includes('login')) return 'Admin access is restricted to authorized personnel. Click "Admin" in the footer to log in.';
      if(s.includes('job')||s.includes('career')||s.includes('hiring')) return 'We are always looking for talent! Please email your resume to our HR department.';
      if(s.includes('rpa')||s.includes('automation')) return 'We offer RPA solutions for data entry, report generation, and more. Check our Services section!';
      return 'I understand you are asking about "' + q + '". Could you please clarify? I can help with Products, Services, or Support.';
    }

    if(toggle) toggle.addEventListener('click', ()=>{
      panel.style.display = panel.style.display==='none' ? 'block' : 'none';
      if(panel.style.display==='block' && log.children.length===0){ add('bot','Hi! I am your AI assistant. Ask me anything about our products or services.'); }
    });

    if(send) send.addEventListener('click', ()=>{
      const q = input.value.trim(); if(!q) return;
      add('user', q);
      input.value = '';
      
      // Simulate typing
      const typingId = 'typing-' + Date.now();
      const t = document.createElement('div');
      t.id = typingId;
      t.innerHTML = '<small style="color:#94a3b8;font-style:italic;margin-left:10px">AI is typing...</small>';
      log.appendChild(t);
      log.scrollTop = log.scrollHeight;

      setTimeout(()=>{
        const el = document.getElementById(typingId);
        if(el) el.remove();
        add('bot', reply(q));
      }, 1000 + Math.random()*500);
    });

    if(input) input.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); send.click(); } });
})();
</script>
</body>
</html>
