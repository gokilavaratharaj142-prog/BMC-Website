<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Feedback ‚Äî Best Marketing Company</title>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&family=Syncopate:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="common.css">
<script>window.API_BASE="http://localhost:5000";</script>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--text);font-family:'Manrope',sans-serif;overflow-x:hidden}
a{color:inherit;text-decoration:none}
a:visited{color:inherit}
.dropdown{position:relative}
.dropdown > a{display:flex;align-items:center;gap:6px}
.dropdown-content{position:absolute;top:28px;left:0;min-width:260px;background:rgba(255,255,255,.95);border:1px solid var(--border);border-radius:10px;box-shadow:0 20px 40px rgba(0,0,0,.08);padding:12px;display:none}
.dropdown-content a{display:block;padding:10px 12px;font-size:12px;letter-spacing:.06em;text-transform:uppercase;color:var(--text);border-radius:8px}
.dropdown-content a:hover{background:var(--bg)}
.dropdown:hover .dropdown-content{display:block}
.page-hero{min-height:50vh;padding:140px 5vw 40px;display:flex;flex-direction:column;justify-content:flex-end;border-bottom:1px solid var(--border)}
.breadcrumbs{font-family:'Syncopate',sans-serif;font-size:12px;color:var(--accent);margin-bottom:20px}
.hero-title{font-size:clamp(40px,7vw,80px);margin-bottom:10px;background:linear-gradient(to right,var(--text),var(--text-light));background-clip:text;-webkit-background-clip:text;color:transparent;-webkit-text-fill-color:transparent}
.hero-desc{max-width:900px;font-size:18px;color:var(--text-light);line-height:1.8;border-left:2px solid var(--accent);padding-left:24px}
.form-wrap{max-width:900px;margin:0 auto;padding:60px 5vw}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
.grid .full{grid-column:1/-1}
.field{display:flex;flex-direction:column;gap:8px}
.label{font-weight:700;font-size:12px;letter-spacing:.1em;text-transform:uppercase;color:var(--accent)}
.input,.textarea,.select{padding:14px 16px;border:1px solid var(--border);border-radius:var(--radius);background:var(--surface);font-size:16px;color:var(--text)}
.textarea{min-height:140px;resize:vertical}
.stars{display:flex;gap:8px}
.star{font-size:22px;color:#c9b4a7;cursor:pointer;transition:transform .1s}
.star.active{color:#ffb703}
.emojis{display:flex;gap:10px}
.emoji{font-size:22px;cursor:pointer;filter:grayscale(50%);transition:transform .1s, filter .2s}
.emoji.active{filter:none;transform:scale(1.1)}
.actions{display:flex;gap:12px;align-items:center;margin-top:24px}
.btn{padding:14px 22px;border-radius:var(--radius);font-weight:700;text-transform:uppercase;letter-spacing:.06em;font-size:12px;cursor:pointer;border:1px solid var(--accent);background:var(--accent);color:white}
.btn.secondary{background:transparent;color:var(--text);border-color:var(--text)}
.note{margin-top:14px;color:var(--text-light);font-size:14px}
.success{margin-top:16px;padding:12px 16px;border:1px solid #31a24c66;background:#31a24c12;color:#1b6d2f;border-radius:8px;display:none}
.list{max-width:900px;margin:0 auto 60px;padding:0 5vw}
.list h3{font-size:20px;margin-bottom:8px}
.item{padding:12px 16px;border:1px solid var(--border);border-radius:8px;background:var(--surface);margin-bottom:8px;display:grid;grid-template-columns:2fr 1fr 1fr}
.item div{font-size:14px;color:var(--text-light)}
/* charts */
.charts{max-width:900px;margin:0 auto;padding:20px 5vw}
.metric{display:flex;align-items:center;gap:14px;margin-bottom:14px}
.metric .num{font-size:28px;font-weight:900;color:var(--accent)}
.bar-wrap{display:flex;align-items:center;gap:12px;margin:6px 0}
.bar-label{width:180px;font-weight:700;font-size:12px;text-transform:uppercase;letter-spacing:.06em;color:var(--accent)}
.bar{flex:1;height:10px;background:#f0ede6;border-radius:999px;overflow:hidden}
.bar > div{height:10px;background:var(--accent);transition:width .3s}
.donut{width:120px;height:120px;border-radius:50%;background:conic-gradient(var(--accent) calc(var(--p)*1%), #f0ede6 0);display:grid;place-items:center;position:relative}
.donut::before{content:'';position:absolute;inset:14px;border-radius:50%;background:var(--surface)}
.donut .val{position:relative;font-weight:900;color:var(--accent)}
.party{position:fixed;inset:0;pointer-events:none;z-index:2000}
.confetti{position:absolute;width:10px;height:16px;background:var(--accent);opacity:.9;transform:translateY(-20px);animation:drop .9s ease-out forwards}
@keyframes drop{to{transform:translateY(100vh) rotate(360deg);opacity:0}}
@media(max-width:900px){.grid{grid-template-columns:1fr}.item{grid-template-columns:1fr}}
</style>
</head>
<body>

<!-- Custom Cursor -->
<div class="cursor-dot"></div>
<div class="cursor-outline"></div>

<div class="topbar">
  <div class="topbar-inner">
    <div>BMC Share: ‚Çπ281.40 (-0.03)</div>
    <div style="display:flex;gap:20px;">
      <a href="#">Careers</a>
      <a href="#">News</a>
      <a href="#">Global (EN)</a>
    </div>
  </div>
</div>
<nav class="main-nav">
  <a class="brand" href="bmc original maari.html#top">Best Marketing Company</a>
  <div class="nav-links">
    <a href="bmc original maari.html#top">Home</a>
    <div class="dropdown">
      <a href="about.html">About Us ‚ñæ</a>
      <div class="dropdown-content">
        <a href="company-profile.html">Company Profile</a>
        <a href="awards.html">Awards & Recognitions</a>
        <a href="memberships.html">Memberships & Affiliations</a>
      </div>
    </div>
    <div class="dropdown">
      <a href="bmc original maari.html#categories">Our Products ‚ñæ</a>
      <div class="dropdown-content">
        <a href="valves.html">Valves</a>
        <a href="crucibles.html">Crucibles</a>
        <a href="foundry-products.html">Foundry Products</a>
        <a href="coolants-lubricants.html">Coolants & Lubricants</a>
        <a href="die-casting.html">Die Casting Machines</a>
        <a href="foundry-automations.html">BMC Automation & Solutions</a>
        <a href="vacuum-casting.html">Vacuum Casting Systems</a>
      </div>
    </div>
    <a href="media.html">Media</a>
    <a href="bmc original maari.html#contact">Contact</a>
    <a href="feedback.html">Feedback</a>
    <a href="admin.html">Dashboard</a>
  </div>
  <a href="bmc original maari.html#contact" class="nav-btn">Get Quote</a>
  <button id="themeToggle" class="nav-btn" style="background:transparent;color:var(--text);border:1px solid var(--text)">Dark Mode</button>
</nav>
<script>
(function(){const k='bmc_theme';const cur=localStorage.getItem(k)||'light';document.documentElement.setAttribute('data-theme',cur);const b=document.getElementById('themeToggle');function txt(){return(localStorage.getItem(k)==='dark')?'Light Mode':'Dark Mode'}if(b){b.textContent=txt();b.addEventListener('click',()=>{const now=(localStorage.getItem(k)==='dark')?'light':'dark';localStorage.setItem(k,now);document.documentElement.setAttribute('data-theme',now);b.textContent=txt();});}})();
</script>
<header class="page-hero">
  <div class="breadcrumbs">Home / Feedback</div>
  <h1 class="hero-title">Share Your Feedback</h1>
  <div class="hero-desc">Help us improve your experience. Your feedback goes directly to our team and is used to refine services and content.</div>
  </header>
<section class="form-wrap">
  <form id="feedbackForm">
    <div class="grid">
      <div class="field">
        <label class="label" for="name">Name</label>
        <input class="input" id="name" name="name" required />
      </div>
      <div class="field">
        <label class="label" for="email">Email</label>
        <input class="input" id="email" name="email" type="email" required />
      </div>
      <div class="field">
        <label class="label" for="phone">Phone</label>
        <input class="input" id="phone" name="phone" type="tel" />
      </div>
      <div class="field">
        <label class="label" for="category">Category</label>
        <select class="select" id="category" name="category">
          <option value="Website">Website</option>
          <option value="Products">Products</option>
          <option value="Support">Support</option>
          <option value="Other">Other</option>
        </select>
      </div>
      <div class="field full">
        <label class="label" for="message">Feedback</label>
        <textarea class="textarea" id="message" name="message" required></textarea>
      </div>
      <div class="field">
        <label class="label" for="rating">Rating</label>
        <select class="select" id="rating" name="rating">
          <option>5 - Excellent</option>
          <option>4 - Good</option>
          <option>3 - Average</option>
          <option>2 - Poor</option>
          <option>1 - Very Poor</option>
        </select>
      </div>
      <div class="field">
        <label class="label">Stars</label>
        <div class="stars" id="stars">
          <span class="star" data-val="1">‚òÖ</span>
          <span class="star" data-val="2">‚òÖ</span>
          <span class="star" data-val="3">‚òÖ</span>
          <span class="star" data-val="4">‚òÖ</span>
          <span class="star" data-val="5">‚òÖ</span>
        </div>
      </div>
      <div class="field">
        <label class="label">Emoji Reaction</label>
        <div class="emojis" id="emojis">
          <span class="emoji" data-val="love">üòç</span>
          <span class="emoji" data-val="like">üëç</span>
          <span class="emoji" data-val="neutral">üòê</span>
          <span class="emoji" data-val="sad">üòï</span>
        </div>
      </div>
      <div class="field">
        <label class="label" for="consent">
          <input type="checkbox" id="consent" required /> I agree to processing my feedback
        </label>
      </div>
    </div>
    <div class="actions">
      <button class="btn" type="submit">Submit Feedback</button>
      <button class="btn secondary" type="button" id="clearBtn">Clear</button>
    </div>
    <div class="note">We store your feedback in your browser only. Admin can export from the Admin page.</div>
    <div class="success" id="successMsg">Thank you! Your feedback has been recorded.</div>
  </form>
</section>
<section class="charts" id="charts"></section>
<section class="list" id="recentList">
  <h3>Recent Feedback</h3>
  <div id="items"></div>
</section>
<script>
const Backend = {
  base: (window.API_BASE || window.FUNCTIONS_BASE_URL || ''),
  enabled(){ return !!this.base },
  post(path, payload){
    if(!this.enabled()) return Promise.resolve({ok:false, skipped:true});
    const url = this.base.endsWith('/') ? `${this.base}${path.replace(/^\//,'')}` : `${this.base}${path}`;
    return fetch(url, {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload)}).catch(()=>({ok:false}));
  }
};
const KEY = 'bmc_feedback';
function seedIfEmpty(){
  const cur = getAll();
  if(cur.length) return;
  const samples = [
    {name:'Anita',email:'anita@example.com',phone:'',category:'Products',message:'Great crucibles',rating:'5 - Excellent',stars:5,sentiment:'love',timestamp:Date.now()-86400000*3},
    {name:'Vijay',email:'vijay@example.com',phone:'',category:'Support',message:'Helpful staff',rating:'4 - Good',stars:4,sentiment:'like',timestamp:Date.now()-86400000*2},
    {name:'Sara',email:'sara@example.com',phone:'',category:'Website',message:'Nice design',rating:'4 - Good',stars:4,sentiment:'like',timestamp:Date.now()-86400000},
    {name:'Kumar',email:'kumar@example.com',phone:'',category:'Products',message:'Die lube improved cycle',rating:'5 - Excellent',stars:5,sentiment:'love',timestamp:Date.now()-3600000},
  ];
  saveAll(samples);
}
function getAll(){
  try { return JSON.parse(localStorage.getItem(KEY)) || []; } catch(e){ return []; }
}
function saveAll(arr){
  localStorage.setItem(KEY, JSON.stringify(arr));
}
function satisfactionPercent(data){
  if(!data.length) return 0;
  const good = data.filter(d=>{
    const r = d.rating||'';
    const s = Number(d.stars||0);
    return r.startsWith('5') || r.startsWith('4') || s>=4 || d.sentiment==='love' || d.sentiment==='like';
  }).length;
  return Math.round((good/data.length)*100);
}
function drawCharts(){
  const wrap = document.getElementById('charts');
  const data = getAll();
  if(!data.length){ wrap.innerHTML=''; return }
  const catCounts = {};
  const rateCounts = {'5 - Excellent':0,'4 - Good':0,'3 - Average':0,'2 - Poor':0,'1 - Very Poor':0};
  data.forEach(d=>{
    catCounts[d.category||'Other']=(catCounts[d.category||'Other']||0)+1;
    if(rateCounts[d.rating]!=null) rateCounts[d.rating]++;
  });
  const maxCat = Math.max(...Object.values(catCounts));
  const maxRate = Math.max(...Object.values(rateCounts));
  const bar = (label,val,max)=>`<div class="bar-wrap"><div class="bar-label">${label}</div><div class="bar"><div style="width:${Math.round((val/max)*100)}%"></div></div><div style="width:40px;text-align:right;color:var(--text-light)">${val}</div></div>`;
  const cats = Object.entries(catCounts).map(([k,v])=>bar(k,v,maxCat)).join('');
  const rates = Object.entries(rateCounts).map(([k,v])=>bar(k,v,maxRate)).join('');
  const sat = satisfactionPercent(data);
  wrap.innerHTML = `<div style="display:flex;align-items:center;gap:18px;margin-bottom:18px">
      <div class="donut" style="--p:${sat}"><div class="val">${sat}%</div></div>
      <div style="color:var(--text-light)">customers like the product quality</div>
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px">
      <div style="border:1px solid var(--border);border-radius:12px;background:var(--surface);padding:16px"><div style="font-weight:900;margin-bottom:8px">Feedback by Category</div>${cats}</div>
      <div style="border:1px solid var(--border);border-radius:12px;background:var(--surface);padding:16px"><div style="font-weight:900;margin-bottom:8px">Ratings Distribution</div>${rates}</div>
    </div>`;
}
function renderList(){
  const items = document.getElementById('items');
  const data = getAll().slice().reverse().slice(0,5);
  items.innerHTML = '';
  data.forEach(d=>{
    const el = document.createElement('div');
    el.className = 'item';
    const when = new Date(d.timestamp).toLocaleString();
    el.innerHTML = `<div><strong>${d.name}</strong> ‚Äî ${d.category}</div><div>${when}</div><div>${d.rating||''}</div>`;
    items.appendChild(el);
  });
}
function initStars(){
  const stars = document.querySelectorAll('#stars .star');
  stars.forEach(s=>{
    s.addEventListener('click', ()=>{
      const val = Number(s.dataset.val);
      stars.forEach(x=>x.classList.toggle('active', Number(x.dataset.val)<=val));
      document.getElementById('starsVal').value = val;
    });
  });
}
function initEmojis(){
  const es = document.querySelectorAll('#emojis .emoji');
  es.forEach(e=>{
    e.addEventListener('click', ()=>{
      es.forEach(x=>x.classList.remove('active'));
      e.classList.add('active');
      document.getElementById('emojiVal').value = e.dataset.val;
    });
  });
}
document.getElementById('feedbackForm').addEventListener('submit', (e)=>{
  e.preventDefault();
  const f = e.target;
  const entry = {
    name: f.name.value.trim(),
    email: f.email.value.trim(),
    phone: f.phone.value.trim(),
    category: f.category.value,
    message: f.message.value.trim(),
    rating: f.rating.value,
    stars: Number(document.getElementById('starsVal').value||0),
    sentiment: document.getElementById('emojiVal').value||'',
    timestamp: Date.now()
  };
  if(!entry.name || !entry.email || !entry.message) return;
  const all = getAll();
  all.push(entry);
  saveAll(all);
  document.getElementById('successMsg').textContent = 'Thanks! You made our day üéâ Your feedback is in.';
  document.getElementById('successMsg').style.display='block';
  Backend.post('/api/feedback', entry);
  triggerConfetti();
  f.reset();
  renderList();
  drawCharts();
});
document.getElementById('clearBtn').addEventListener('click', ()=>{
  document.getElementById('feedbackForm').reset();
});
// hidden inputs to store stars/emojis
const hiddenStars = document.createElement('input'); hiddenStars.type='hidden'; hiddenStars.id='starsVal';
const hiddenEmoji = document.createElement('input'); hiddenEmoji.type='hidden'; hiddenEmoji.id='emojiVal';
document.getElementById('feedbackForm').appendChild(hiddenStars);
document.getElementById('feedbackForm').appendChild(hiddenEmoji);
seedIfEmpty();
initStars(); initEmojis();
renderList(); drawCharts();
window.addEventListener('scroll', ()=>{
  const n = document.querySelector('.main-nav');
  if(!n) return;
  if(window.scrollY>10) n.classList.add('scrolled'); else n.classList.remove('scrolled');
});

// CURSOR
const cursorDot = document.querySelector('.cursor-dot');
const outline = document.querySelector('.cursor-outline');

if (cursorDot && outline) {
  window.addEventListener('mousemove', (e) => {
    const posX = e.clientX;
    const posY = e.clientY;
    cursorDot.style.transform = `translate(${posX}px, ${posY}px)`;
    outline.animate({
      left: `${posX}px`,
      top: `${posY}px`
    }, { duration: 500, fill: 'forwards' });
  });

  document.querySelectorAll('a, button, .dropdown, .product-card, .pod, .service-row, .case-card, .trust-item, .nav-btn, input, textarea, .tab, .btn, .fab, .star, .emoji, .contact-pill, .card').forEach(el => {
    el.addEventListener('mouseenter', () => {
      outline.style.width = '60px';
      outline.style.height = '60px';
      outline.style.background = 'rgba(141, 110, 99, 0.2)';
      outline.style.borderColor = 'transparent';
    });
    el.addEventListener('mouseleave', () => {
      outline.style.width = '40px';
      outline.style.height = '40px';
      outline.style.background = 'transparent';
      outline.style.borderColor = 'var(--accent-dark)';
    });
  });
}

(function(){const k='bmc_theme';const cur=localStorage.getItem(k)||'light';document.documentElement.setAttribute('data-theme',cur);const b=document.getElementById('themeToggle');function txt(){return(localStorage.getItem(k)==='dark')?'Light Mode':'Dark Mode'}if(b){b.textContent=txt();b.addEventListener('click',()=>{const now=(localStorage.getItem(k)==='dark')?'light':'dark';localStorage.setItem(k,now);document.documentElement.setAttribute('data-theme',now);b.textContent=txt();});}})();
function triggerConfetti(){
  const p = document.createElement('div');
  p.className='party';
  document.body.appendChild(p);
  const colors = ['#8D6E63','#4E342E','#F9F5EB','#3E2723','#31a24c'];
  for(let i=0;i<80;i++){
    const c = document.createElement('div');
    c.className='confetti';
    c.style.left = Math.random()*100 + 'vw';
    c.style.background = colors[Math.floor(Math.random()*colors.length)];
    c.style.animationDelay = (Math.random()*0.6)+'s';
    c.style.transform = `translateY(-20px) rotate(${Math.random()*180}deg)`;
    p.appendChild(c);
  }
  setTimeout(()=>{ document.body.removeChild(p) }, 1500);
}
</script>
<style>
.fab-wrap{position:fixed;right:22px;bottom:22px;z-index:10000;display:flex;flex-direction:column;gap:10px}
.fab{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:var(--accent);color:#fff;border:1px solid var(--accent-dark);box-shadow:0 10px 20px rgba(0,0,0,0.15);cursor:pointer;font-size:20px;position:relative}
.fab:hover{background:var(--accent-dark)}
.fab::after{content:attr(data-tip);position:absolute;right:58px;top:50%;transform:translateY(-50%);background:#2C1810;color:#F9F5EB;padding:6px 10px;border-radius:8px;font-size:12px;opacity:0;pointer-events:none;transition:opacity .2s}
.fab:hover::after{opacity:1}
.chat-window{position:fixed;right:22px;bottom:90px;width:300px;background:var(--surface);border:1px solid var(--border);border-radius:12px;box-shadow:0 20px 40px rgba(0,0,0,0.15);display:none;overflow:hidden}
.chat-head{padding:10px 12px;background:var(--text);color:var(--bg);font-weight:700;font-size:12px;text-transform:uppercase;letter-spacing:.06em}
.chat-body{padding:10px;max-height:260px;overflow:auto;font-size:14px;color:var(--text)}
.chat-msg{margin:6px 0;padding:8px 10px;border-radius:10px;background:#f4efe6}
.chat-input{display:flex;gap:6px;padding:10px;border-top:1px solid var(--border)}
.chat-input input{flex:1;padding:10px;border:1px solid var(--border);border-radius:8px}
.chat-input button{padding:10px 14px;border-radius:8px;border:1px solid var(--accent);background:var(--accent);color:#fff;font-weight:700;font-size:12px}
</style>
<div class="fab-wrap">
  <a class="fab" href="https://wa.me/919597512444" target="_blank" aria-label="WhatsApp" data-tip="Chat on WhatsApp">üü¢</a>
  <a class="fab" href="tel:+919597512444" aria-label="Call" data-tip="Call us">üìû</a>
  <a class="fab" href="mailto:mail@bestmarketingco.net" aria-label="Email" data-tip="Send Email">‚úâÔ∏è</a>
  <button class="fab" id="chatToggle" aria-label="Chatbot" data-tip="Chat with BMC">üí¨</button>
</div>
<div class="chat-window" id="chatWin">
  <div class="chat-head">BMC Chat</div>
  <div class="chat-body" id="chatBody">
    <div class="chat-msg">Hi! Ask anything or leave your feedback.</div>
  </div>
  <div class="chat-input">
    <input id="chatText" placeholder="Type a message..." />
    <button id="chatSend">Send</button>
  </div>
</div>
<style>
.float-btn{position:fixed;bottom:22px;display:flex;gap:10px;z-index:10001}
.float-btn a,.float-btn button{padding:10px 14px;border-radius:999px;border:1px solid var(--accent-dark);background:var(--accent);color:#fff;font-weight:700;font-size:12px;display:inline-flex;align-items:center;gap:8px}
.float-btn .left{left:22px}
.float-btn .right{right:22px}
.back-top{display:none}
</style>
<div class="float-btn left">
  <a href="bmc original maari.html#top">‚Üê Home</a>
  <button class="back-top" id="backTopBtn">‚Üë Top</button>
</div>
<script>
const chatWin = document.getElementById('chatWin');
document.getElementById('chatToggle').addEventListener('click', ()=>{
  chatWin.style.display = chatWin.style.display==='none' || chatWin.style.display==='' ? 'block' : 'none';
});
function reply(msg){
  const body = document.getElementById('chatBody');
  const add = (text)=>{ const d=document.createElement('div'); d.className='chat-msg'; d.textContent=text; body.appendChild(d); body.scrollTop = body.scrollHeight; };
  add(msg);
}
function handle(text){
  const t = text.toLowerCase();
  if(t.includes('feedback')) return 'Thanks! Submit via the form; Admin visualizes charts in Admin.';
  if(t.includes('contact')||t.includes('phone')||t.includes('call')) return 'Call +91 95975 12444 or email mail@bestmarketingco.net.';
  if(t.includes('products')||t.includes('foundry')||t.includes('det')||t.includes('tbc')||t.includes('moresco')) return 'Products: Morgan crucibles, DET vacuum systems, TBC machines, MORESCO lubricants.';
  return 'Our team will respond soon. Please leave your email and query.';
}
document.getElementById('chatSend').addEventListener('click', ()=>{
  const input = document.getElementById('chatText');
  const text = input.value.trim();
  if(!text) return;
  reply('You: ' + text);
  setTimeout(()=>reply('BMC: ' + handle(text)), 300);
  input.value='';
});
window.addEventListener('scroll', ()=>{
  const b = document.getElementById('backTopBtn');
  if(!b) return;
  b.style.display = window.scrollY > 200 ? 'inline-flex' : 'none';
});
document.getElementById('backTopBtn')?.addEventListener('click', ()=>window.scrollTo({top:0,behavior:'smooth'}));
</script>
</body>
</html>
